<!DOCTYPE html>
<html>
<head>
  <title>me‚è∞irl</title>
  <link rel="stylesheet" href="jquery-jvectormap-2.0.3.css" type="text/css" media="screen"/>
  <link rel="stylesheet" href="style.css" type="text/css" media="screen"/>
  <script src="/libraries/jquery.js"></script>
  <script src="jquery-jvectormap-2.0.3.min.js"></script>
  <script src="jquery-jvectormap-world-mill.js"></script>
  <style>body,html{width:100%;height:100%;margin:0;padding:0}</style>
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
</head>
<body>
  <img src="frog.jpg" id="frog"></img>
  <img src="almostWednesday.jpg" id="tadpole" hidden="true"></img>
  <div id="world-map" style="width:100%; height:100%;position:absolute;top:0px"></div>
  <script>
    function calcTime(offset) {
        var d = new Date();

        var utc = new Date(d.getTime() + (d.getTimezoneOffset() * 60000));

        var adjust = new Date(utc.getTime() + (offset * 3600000));
        return (adjust.getDay(offset));
    }
    var map;
    $(function(){
      map = new jvm.Map({
        map: 'world_mill',
        regionStyle:{
          initial:{
            fill:'black'
          }
        },
        backgroundColor: 'rgba(255,255,255,0)',
        container: $("#world-map"),
        zoomMax: 1
      });
      time = []
      for (i=-10;i<12;i++){
        time.push(calcTime(i))
      }
      window.onresize()

    });
    window.onresize = function(){
      wednesdays = []
      for (i=0;i<time.length;i++){
        if (time[i]==3){
          wednesdays.push(i*window.innerWidth/time.length)
        }
      }
      frog.style.left = Math.min(...wednesdays).toString()+"px"
      width = (Math.max(...wednesdays)-Math.min(...wednesdays))
      if (time[time.length-1] == 3){
        width = (window.innerWidth-Math.min(...wednesdays)-5)
      }
      frog.style.width = width.toString()+"px"
      if (wednesdays.length == 0){
        frog.hidden = true
        tadpole.hidden = false
        tadpole.style.left = "0px"
        tadpole.style.width = "99%"
      }
      if (wednesdays[0] == 0 && wednesdays.length != 0){
        tadpole.hidden = false
        tadpole.style.left = wednesdays[wednesdays.length-1].toString()+"px"
        tadpole.style.width = (window.innerWidth-wednesdays[wednesdays.length-1]-5).toString()+"px"
      }
      else{
        tadpole.hidden = false
        tadpole.style.left = "0px"
        tadpole.style.width = (Math.min(...wednesdays)).toString()+"px"
      }
      if (wednesdays.length == time.length){
        tadpole.hidden = true
      }
    }
  </script>
</body>
</html>
