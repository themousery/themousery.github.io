define("fileUploader/utils/uploadFilesToMediaPlatform",["coreUtils"],function(){"use strict";function a(a,b,c){var d="picture";var e=new FormData;e.set("upload_token",b);e.set("media_type",d);e.append("file",a);e.append("siteMediaToken",b);var f=new XMLHttpRequest;f.onreadystatechange=function(){if(f.readyState===XMLHttpRequest.DONE){return f.response}};f.open("POST",c);f.send(e)}function b(b,c){c="APP "+c;var d=new XMLHttpRequest;d.onreadystatechange=function(){if(d.readyState===XMLHttpRequest.DONE){var c=JSON.parse(d.response);if(!c.error_code){a(b,c.upload_token,c.upload_url)}}};d.open("GET","https://files.wix.com/files/upload/url?media_type=picture");d.setRequestHeader("Authorization",c);d.setRequestHeader("Accept","application/json");d.setRequestHeader("Content-Type","application/json");d.send(null)}return{upload:b}});define("fileUploader/components/fileUploader",["santaProps","lodash","core","fileUploader/utils/uploadFilesToMediaPlatform"],function(a,b,c,d){"use strict";var e=c.compMixins;var f=a.Types;return{displayName:"FileUploader",mixins:[e.skinBasedComp],statics:{useSantaTypes:true},propTypes:b.assign({compData:a.Types.Component.compData.isRequired,compProp:a.Types.Component.compProp.isRequired,siteMediaToken:f.RendererModel.siteMediaToken.isRequired}),getInitialState:function(){return{selectedFiles:[]}},createFileNodes:function(a,c,d,e){var f=b.cloneDeep(this.state.selectedFiles);var g={isPlaceholder:b.isEmpty(f)?a:false,alignment:c,previewState:e,removeFunction:this.removeFileFromList};if(b.isEmpty(f)){if(!b.isUndefined(e)){g.isPlaceholder=false;f.push({name:"Example.txt"})}else if(a){f.push({name:d})}}return b.map(f,function(a,b){return this.createChildComponent({id:"uploadName"+b,fileName:a.name},"wysiwyg.viewer.components.inputs.uploadName","uploadName",g)},this)},removeFileFromList:function(a){var c=b.cloneDeep(this.state.selectedFiles);b.remove(c,"name",a);this.setState({selectedFiles:c})},getSkinProperties:function(){var a=this.props.compData;var c=this.props.compProp;var e={};e[c.buttonAlignment]=true;e["no-label"]=a.buttonLabel==="";var f=this.getComponentPreviewState()||this.props.previewState;return{"":{},chooseFileButton:{className:this.classSet(e),onClick:function(){this.refs.fileInput.click()}.bind(this),"data-preview":f},buttonLabel:{children:[a.buttonLabel]},fileInput:{onChange:function(){this.setState({selectedFiles:b.map(this.refs.fileInput.files,function(a){return{name:a.name,size:a.size}})});d.upload(this.refs.fileInput.files[0],this.props.siteMediaToken)}.bind(this)},files:{children:this.createFileNodes(c.showPlaceholder,c.filesAlignment,a.placeholderLabel,f),"data-preview":f}}}}});define("fileUploader/components/uploadName",["santaProps","react","lodash","core"],function(a,b,c,d){"use strict";var e=d.compMixins;return{displayName:"UploadName",mixins:[e.skinBasedComp],statics:{useSantaTypes:true},propTypes:c.assign({compData:a.Types.Component.compData.isRequired,compProp:a.Types.Component.compProp.isRequired,alignment:b.PropTypes.string,removeFunction:b.PropTypes.func,isPlaceholder:b.PropTypes.bool}),getSkinProperties:function(){var a=this.props.compData;var b={};b["align-"+this.props.alignment]=true;var c=this.getComponentPreviewState()||this.props.previewState;return{"":{className:this.classSet(b),"data-preview":c},"x-icon":{style:this.props.isPlaceholder?{display:"none"}:{},onClick:function(){if(this.props.removeFunction){this.props.removeFunction(a.fileName)}}.bind(this),"data-preview":c},"file-name":{className:this.props.isPlaceholder?"file-name-placeholder":"",children:[a.fileName],"data-preview":c}}}}});define("fileUploader",["fileUploader/components/fileUploader","fileUploader/components/uploadName"],function(a,b){"use strict";return{fileUploader:a,uploadName:b}});